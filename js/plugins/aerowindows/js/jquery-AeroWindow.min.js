(function($){$.fn.extend({AeroWindow:function(options){var defaults={WindowTitle:null,WindowPositionTop:60,WindowPositionLeft:10,WindowWidth:300,WindowHeight:300,WindowMinWidth:250,WindowMinHeight:0,WindowResizable:true,WindowMaximize:true,WindowMinimize:true,WindowClosable:true,WindowDraggable:true,WindowStatus:'regular',WindowAnimationSpeed:500,WindowAnimation:'easeOutElastic',callback:Function()};var options=$.extend(defaults,options);WindowID=$(this).attr('id');if(($('body').data(WindowID))==null){var $WindowAllwaysRegistered=false;$('body').data(WindowID,1)}else{var $WindowAllwaysRegistered=true}if($WindowAllwaysRegistered==true){Window=$(this).find(".AeroWindow");$(this).find(".AeroWindow").css('display','block');$(".AeroWindow").removeClass('active');if(Window.hasClass('AeroWindow'))Window.addClass('active');if(($('body').data('AeroWindowMaxZIndex'))==null){$('body').data('AeroWindowMaxZIndex',Window.css('z-index'))}i=$('body').data('AeroWindowMaxZIndex');i++;Window.css('z-index',i);$('body').data('AeroWindowMaxZIndex',Window.css('z-index'));$('.aw-title nobr').html(options.WindowTitle);options.callback();return}return this.each(function(){var o=options;var WindowContent=$(this).html();if(o.WindowMinimize){if(o.WindowMaximize||o.WindowClosable){var WinMinBtn='<a href="#" class="win-min-btn"></a><div class="win-btn-spacer"></div>'}else{var WinMinBtn='<a href="#" class="win-min-btn"></a>'}}else{var WinMinBtn=''}if(o.WindowMaximize){if(o.WindowClosable){var WinMaxBtn='<div class="WinBtnSet winmax"><a href="#" class="win-max-btn"></a><div class="win-btn-spacer"></div></div>';var WinRegBtn='<div class="WinBtnSet winreg"><a href="#" class="win-reg-btn"></a><div class="win-btn-spacer"></div></div>'}else{var WinMaxBtn='<div class="WinBtnSet winmax"><a href="#" class="win-max-btn"></a></div>';var WinRegBtn='<div class="WinBtnSet winreg"><a href="#" class="win-reg-btn"></a></div>'}}else{var WinMaxBtn='';var WinRegBtn=''}if(o.WindowClosable){var WinCloseBtn='<a href="#" class="win-close-btn"></a>'}else{var WinCloseBtn=''}if(o.WindowMinimize||o.WindowMaximize||o.WindowClosable){var WinBtnLeftedge='<div class="win-btn-leftedge"></div>';var WinBtnRightedge='<div class="win-btn-rightedge"></div>'}else{var WinBtnLeftedge='';var WinBtnRightedge=''}$(this).html('<div class="AeroWindow">'+'  <table cellpadding="0" cellspacing="0" border="0">'+'    <tr>'+'      <td class="table-tl"></td>'+'      <td class="table-tm"></td>'+'      <td class="table-tr"></td>'+'    </tr>'+'    <tr>'+'      <td class="table-lm"></td>'+'      <td class="table-mm" align="right">'+'        <div class="title aw-title"><nobr>'+o.WindowTitle+'</nobr></div>'+'        <div class="buttons">'+WinBtnLeftedge+WinMinBtn+WinMaxBtn+WinRegBtn+WinCloseBtn+WinBtnRightedge+'        </div>'+'        <div class="table-mm-container" align="left">'+'          <div class="table-mm-content" style="width: '+o.WindowWidth+'px; height: '+o.WindowHeight+'px;">'+WindowContent+'          </div>'+'        </div>'+'      </td>'+'      <td class="table-rm"></td>'+'    </tr>'+'    <tr>'+'      <td class="table-bl"></td>'+'      <td class="table-bm"></td>'+'      <td class="table-br"></td>'+'    </tr>'+'  </table>'+'</div>');$(this).css('display','block');var Window=$(this).find(".AeroWindow");var WindowContainer=$(this).find(".table-mm-container");var WindowContent=$(this).find(".table-mm-content");var BTNMin=$(this).find(".win-min-btn");var BTNMax=$(this).find(".WinBtnSet.winmax");var BTNReg=$(this).find(".WinBtnSet.winreg");var BTNClose=$(this).find(".win-close-btn");BTNReg.css('display','none');FocusWindow(Window);if(o.WindowPositionTop=='center'){o.WindowPositionTop=($(window).height()/2)-o.WindowHeight/2-37}if(o.WindowPositionLeft=='center'){o.WindowPositionLeft=($(window).width()/2)-o.WindowWidth/2-17}switch(o.WindowStatus){case'regular':RegularWindow();break;case'maximized':MaximizeWindow();break;case'minimized':MinimizeWindow();break;default:break}function MaximizeWindow(){WindowContainer.css('visibility','visible');BTNMax.css('display','none');BTNReg.css('display','block');WindowContent.animate({width:$(window).width()-32,height:$(window).height()-77},{queue:false,duration:o.WindowAnimationSpeed,easing:o.WindowAnimation});Window.animate({width:$(window).width(),height:$(window).height(),top:0,left:0},{duration:o.WindowAnimationSpeed,easing:o.WindowAnimation});o.WindowStatus='maximized';return(false)}function MinimizeWindow(){BTNReg.css('display','block');BTNMax.css('display','none');WindowContainer.css('visibility','hidden');WindowContent.animate({width:o.WindowMinWidth,height:o.WindowMinHeight},{queue:true,duration:o.WindowAnimationSpeed,easing:o.WindowAnimation});Window.animate({width:o.WindowMinWidth+32,height:o.WindowMinHeight+72,top:$(window).height()-77,left:0},{duration:o.WindowAnimationSpeed,easing:o.WindowAnimation});o.WindowStatus='minimized';return(false)}function RegularWindow(){BTNMax.css('display','block');BTNReg.css('display','none');WindowContainer.css('visibility','visible');WindowContent.animate({width:o.WindowWidth,height:o.WindowHeight},{queue:false,duration:o.WindowAnimationSpeed,easing:o.WindowAnimation});Window.animate({width:o.WindowWidth+32,height:o.WindowHeight+72},{queue:false,duration:o.WindowAnimationSpeed,easing:o.WindowAnimation});if((typeof(o.WindowPositionLeft)=='string')&&(o.WindowPositionLeft.substring(0,1)=='-'))o.WindowPositionLeft=0;Window.animate({top:o.WindowPositionTop,left:o.WindowPositionLeft},{duration:o.WindowAnimationSpeed,easing:o.WindowAnimation,complete:function(){o.callback()}});o.WindowStatus='regular';return(false)}function FocusWindow(Window){$(".AeroWindow").removeClass('active');if(Window.hasClass('AeroWindow'))Window.addClass('active');if(($('body').data('AeroWindowMaxZIndex'))==null){$('body').data('AeroWindowMaxZIndex',Window.css('z-index'))}i=$('body').data('AeroWindowMaxZIndex');i++;Window.css('z-index',i);$('body').data('AeroWindowMaxZIndex',Window.css('z-index'))}if(o.WindowMaximize){$(this).dblclick(function(){switch(o.WindowStatus){case'regular':MaximizeWindow();break;case'maximized':RegularWindow();break;case'minimized':RegularWindow();break;default:break}})}else{$(this).dblclick(function(){switch(o.WindowStatus){case'maximized':RegularWindow();break;case'minimized':RegularWindow();break;default:break}})}BTNMin.click(function(){FocusWindow(Window);MinimizeWindow();return false});BTNMax.click(function(){FocusWindow(Window);MaximizeWindow();return false});BTNReg.click(function(){FocusWindow(Window);RegularWindow();return false});BTNClose.click(function(){Window.css('display','none');return(false)});if(o.WindowDraggable){Window.draggable({distance:3,cancel:".table-mm-content",start:function(){FocusWindow(Window);$(".AeroWindow").find('#iframeHelper').css({'display':'block'});$(".AeroWindow").removeClass('active');$(this).addClass('active');$('body').data('AeroWindowMaxZIndex',$(this).css('z-index'))},drag:function(){WindowTop=-1*$(this).offset().top;WindowLeft=-1*$(this).offset().left;$(this).css({backgroundPosition:WindowLeft+'px '+WindowTop+'px'})},stop:function(){o.WindowPositionTop=Window.css('top');o.WindowPositionLeft=Window.css('left');$(".AeroWindow").find('#iframeHelper').css({'display':'none'})}})}Window.click(function(){FocusWindow(Window)});if(o.WindowResizable){Window.resizable({minHeight:o.WindowMinHeight+72,minWidth:o.WindowMinWidth,alsoResize:WindowContent,start:function(){WindowContainer.css('visibility','visible');$(".AeroWindow").find('#iframeHelper').css({'display':'block'});$(".AeroWindow").removeClass('active');Window.addClass('active');if(($('body').data('AeroWindowMaxZIndex'))==null){$('body').data('AeroWindowMaxZIndex',Window.css('z-index'))}i=$('body').data('AeroWindowMaxZIndex');i++;Window.css('z-index',i);$('body').data('AeroWindowMaxZIndex',Window.css('z-index'))},stop:function(){o.WindowWidth=WindowContent.width();o.WindowHeight=WindowContent.height();$(".AeroWindow").find('#iframeHelper').css({'display':'none'})}})}})}})})(jQuery);var AeroWindowClose=function(){$(document).find('.AeroWindow .win-close-btn').trigger('click')};